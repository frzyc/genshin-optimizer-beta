"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[592],{5658:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(6620),l=n(52322);const o=(0,a.Z)((0,l.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox")},27216:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(6620),l=n(52322);const o=(0,a.Z)((0,l.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank")},73673:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(6620),l=n(52322);const o=(0,a.Z)((0,l.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight")},68164:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(6620),l=n(52322);const o=(0,a.Z)((0,l.jsx)("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download")},30460:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(6620),l=n(52322);const o=(0,a.Z)((0,l.jsx)("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}),"InsertLink")},70034:(e,t,n)=>{n.d(t,{Z:()=>o});n(2784);var a=n(6620),l=n(52322);const o=(0,a.Z)((0,l.jsx)("path",{d:"M10 15l5.19-3L10 9v6m11.56-7.83c.13.47.22 1.1.28 1.9.07.8.1 1.49.1 2.09L22 12c0 2.19-.16 3.8-.44 4.83-.25.9-.83 1.48-1.73 1.73-.47.13-1.33.22-2.65.28-1.3.07-2.49.1-3.59.1L12 19c-4.19 0-6.8-.16-7.83-.44-.9-.25-1.48-.83-1.73-1.73-.13-.47-.22-1.1-.28-1.9-.07-.8-.1-1.49-.1-2.09L2 12c0-2.19.16-3.8.44-4.83.25-.9.83-1.48 1.73-1.73.47-.13 1.33-.22 2.65-.28 1.3-.07 2.49-.1 3.59-.1L12 5c4.19 0 6.8.16 7.83.44.9.25 1.48.83 1.73 1.73z"}),"YouTube")},17206:(e,t,n)=>{n.d(t,{Z:()=>g});var a=n(31461),l=n(80422),o=n(67550),r=n(38951),i=n(2784),s=n(21548),c=n(74637),d=n(25434),u=n(86482),h=n(71765),Z=n(42117),p=n(52903);const m=["artSetKey","setArtSetKey","label"];function g(e){let{artSetKey:t,setArtSetKey:n,label:g=""}=e,f=(0,a.Z)(e,m);const v=(0,d.Z)((()=>c.y.getAll),[]),{t:b}=(0,s.$G)(["artifact","artifactNames_gen"]);g=g||b("artifact:autocompleteLabels.set");const y=(0,i.useMemo)((()=>v?Object.entries(c.y.setKeysByRarities(v)).flatMap((([e,t])=>t.map((t=>({key:t,label:b(`artifactNames_gen:${t}`),grouper:+e}))))).sort(Z.Z):[]),[v,b]),x=(0,i.useCallback)((e=>{var t;return e?null==v||null==(t=v(e))?void 0:t.defIcon:void 0}),[v]);return(0,p.tZ)(u._,Object.assign({options:y,valueKey:t,onChange:e=>n(null!=e?e:""),toImg:x,label:g,groupBy:e=>{var t,n;return null!=(t=null==(n=e.grouper)?void 0:n.toString())?t:""},renderGroup:e=>e.group&&(0,p.BX)(l.Z,{component:o.Z,children:[(0,p.BX)(r.Z,{sx:{top:"-1em"},children:[e.group," ",(0,p.tZ)(h.q,{stars:+e.group})]},`${e.group}Header`),e.children]},e.group)},f))}},86113:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(67550),l=n(62197),o=n(52903);function r({avatar:e,title:t,action:n}){return(0,o.BX)(a.Z,{display:"flex",gap:1,p:2,alignItems:"center",children:[e,(0,o.tZ)(l.Z,{variant:"subtitle1",sx:{flexGrow:1},children:t}),n&&(0,o.tZ)(l.Z,{variant:"caption",children:n})]})}},73740:(e,t,n)=>{n.d(t,{X:()=>M,Z:()=>q});var a=n(67550),l=n(62197),o=n(56961),r=n(2784),i=n(790),s=n(41015),c=n(87985),d=n(86113),u=n(7671),h=n(64919),Z=n(5658),p=n(27216),m=n(83249),g=n(94380),f=n(38553),v=n(53710),b=n(45475),y=n(83673),x=n(21845),C=n(52903);function w({conditional:e,disabled:t=!1}){return 1===Object.keys(e.states).length&&"path"in e?(0,C.tZ)(_,{conditional:e,disabled:t}):"path"in e?(0,C.tZ)(k,{conditional:e,disabled:t}):(0,C.tZ)(H,{conditional:e,disabled:t})}function _({conditional:e,disabled:t}){const{character:n,characterDispatch:a}=(0,r.useContext)(v.K),{data:l}=(0,r.useContext)(i.R),o=(0,r.useCallback)((t=>{const l=(0,s.I8)(n.conditional);t?(0,s.SR)(l,e.path,t):(0,s.uH)(l,e.path),a({conditional:l})}),[e,n,a]),c=l.get(e.value).value,[d,u]=Object.entries(e.states)[0],h=S(u.name),g=P(e.name);return(0,C.BX)(m.Z,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:c?"success":"primary",onClick:()=>o(c?void 0:d),disabled:t,startIcon:c?(0,C.tZ)(Z.Z,{}):(0,C.tZ)(p.Z,{}),children:[g," ",h]})}function k({conditional:e,disabled:t}){const{character:n,characterDispatch:a}=(0,r.useContext)(v.K),{data:l}=(0,r.useContext)(i.R),c=(0,r.useCallback)((t=>{const l=(0,s.I8)(n.conditional);t?(0,s.SR)(l,e.path,t):(0,s.uH)(l,e.path),a({conditional:l})}),[e,n,a]),d=l.get(e.value).value,u=d?e.states[d]:void 0,h=u?S(u.name):(0,C.tZ)(y.Z,{color:"secondary",children:"Not Active"}),Z=P(e.name);return(0,C.BX)(b.Z,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:d?"success":"primary",title:(0,C.BX)("span",{children:[Z," ",h]}),disabled:t,children:[(0,C.tZ)(g.Z,{onClick:()=>c(),selected:!u,disabled:!u,children:(0,C.tZ)("span",{children:"Not Active"})}),(0,C.tZ)(o.Z,{}),Object.entries(e.states).map((([e,t])=>(0,C.tZ)(g.Z,{onClick:()=>c(e),selected:d===e,disabled:d===e,children:t.name},e)))]})}function H({conditional:e,disabled:t}){const{character:n,characterDispatch:a}=(0,r.useContext)(v.K),{data:l}=(0,r.useContext)(i.R),o=(0,r.useCallback)(((e,t)=>{const l=(0,s.I8)(n.conditional);t?(0,s.SR)(l,e,t):(0,s.uH)(l,e),a({conditional:l})}),[n,a]);return(0,C.tZ)(f.Z,{fullWidth:!0,orientation:"vertical",disableElevation:!0,color:"secondary",children:Object.entries(e.states).map((([e,n])=>{const a=l.get(n.value).value,r=a===e;return(0,C.tZ)(m.Z,{color:r?"success":"primary",disabled:t,fullWidth:!0,onClick:()=>o(n.path,a?void 0:e),size:"small",startIcon:r?(0,C.tZ)(Z.Z,{}):(0,C.tZ)(p.Z,{}),sx:{borderRadius:0},children:P(n.name)},e)}))})}function B(e){return"string"!=typeof e}function S(e){if(!e)return"";let t="primary",n=e;return e&&B(e)&&e.props.color&&(t=e.props.color,n=(0,C.tZ)("span",{children:e.props.children})),(0,C.tZ)(y.Z,{sx:{ml:.5},color:t,children:n})}function P(e){if(B(e)){const t=e.props.key18,n=e.props.ns,a=e.props.values;return(0,C.tZ)(x.v,{ns:n,key18:t,values:a,useBadge:!0})}return e}function X({conditional:e,hideHeader:t=!1,hideDesc:n=!1}){const{data:a}=(0,r.useContext)(i.R);let l;if("path"in e){var o;const t=a.get(e.value).value;l=t&&(null==(o=e.states[t])?void 0:o.fields)}else l=Object.values(e.states).flatMap((e=>a.get(e.value).value?e.fields:[]));return(0,C.BX)(c.Z,{children:[!(0,s.mY)(t,e)&&(0,C.tZ)(M,{header:e.header,hideDesc:n}),(0,C.tZ)(u.Z,{sx:{p:0,"&:last-child":{pb:0}},children:(0,C.tZ)(w,{conditional:e})}),l&&(0,C.tZ)(h.ZP,{fields:l})]})}var W=n(82334);function q({sections:e,teamBuffOnly:t,hideDesc:n=!1,hideHeader:l=!1}){const{data:o}=(0,r.useContext)(i.R);if(!e.length)return null;const s=e.map(((e,a)=>e.canShow&&!o.get(e.canShow).value||t&&!e.teamBuff?null:(0,C.tZ)(D,{section:e,hideDesc:n,hideHeader:l},a))).filter((e=>e));return s.length?(0,C.tZ)(a.Z,{display:"flex",flexDirection:"column",gap:1,children:s}):null}function D({section:e,hideDesc:t=!1,hideHeader:n=!1}){return"fields"in e?(0,C.tZ)(V,{section:e,hideDesc:t,hideHeader:n}):"states"in e?(0,C.tZ)(X,{conditional:e,hideDesc:t,hideHeader:n}):(0,C.tZ)(I,{section:e})}function V({section:e,hideDesc:t,hideHeader:n}){return(0,C.BX)(c.Z,{children:[!(0,s.mY)(n,e)&&e.header&&(0,C.tZ)(M,{header:e.header,hideDesc:t,hideDivider:0===e.fields.length}),(0,C.tZ)(h.ZP,{fields:e.fields})]})}function I({section:e}){const{data:t}=(0,r.useContext)(i.R);return(0,C.tZ)("div",{children:(0,s.mY)(e.text,t)})}function M({header:e,hideDesc:t,hideDivider:n}){const{data:a}=(0,r.useContext)(i.R),{icon:c,title:u,action:h}=e,Z=(0,s.mY)(c,a),p=!t&&(0,s.mY)(e.description,a),m=t?u:(0,C.BX)("span",{children:[u," ",(0,C.tZ)(W.Z,{title:(0,C.tZ)(l.Z,{children:p})})]});return(0,C.BX)(C.HY,{children:[(0,C.tZ)(d.Z,{avatar:Z,title:m,action:h}),!n&&(0,C.tZ)(o.Z,{})]})}},52757:(e,t,n)=>{n.d(t,{Z:()=>a});const a=(0,n(65992).ZP)("img")({width:"100%",height:"auto"})},97859:(e,t,n)=>{n.d(t,{Z:()=>Z});var a=n(38553),l=n(83249),o=n(94380),r=n(2784),i=n(21548),s=n(21626),c=n(41015),d=n(89343),u=n(45475),h=n(52903);function Z({level:e,ascension:t,setBoth:n,useLow:Z=!1}){const{t:p}=(0,i.$G)("ui"),m=Z?s.sU:s.SJ,g=(0,r.useCallback)(((e=1)=>{e=(0,c.uZ)(e,1,Z?s.d8:s.Qq);const t=m.findIndex((t=>e<=t));n({level:e,ascension:t})}),[n,m,Z]),f=(0,r.useCallback)((()=>{const a=m.findIndex((t=>90!==e&&e===t));n(t===a?{ascension:t+1}:{ascension:a})}),[n,m,t,e]);return(0,h.BX)(a.Z,{sx:{bgcolor:e=>e.palette.contentDark.main},children:[(0,h.tZ)(d.CC,{children:(0,h.tZ)(d.ZP,{onChange:g,value:e,startAdornment:"Lv. ",inputProps:{min:1,max:90,sx:{textAlign:"center",width:"3em"}},sx:{height:"100%",pl:2}})}),(0,h.tZ)(l.Z,{sx:{pl:1,whiteSpace:"nowrap"},disabled:!(Z?s.nB:s.ek)(e),onClick:f,children:(0,h.BX)("strong",{children:["/ ",s.SJ[t]]})}),(0,h.tZ)(u.Z,{title:p("selectlevel"),sx:{flexGrow:1},children:[...Z?s.vF:s.D4].map((([a,l])=>{const r=a===e&&l===t;return(0,h.tZ)(o.Z,{selected:r,disabled:r,onClick:()=>n({level:a,ascension:l}),children:a===m[l]?`Lv. ${a}`:`Lv. ${a}/${m[l]}`},`${a}/${l}`)}))})]})}},14520:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(94380),l=n(21548),o=n(36893),r=n(45475),i=n(52903);function s({refinement:e,setRefinement:t}){const{t:n}=(0,l.$G)("ui");return(0,i.tZ)(r.Z,{title:n("refinement",{value:e}),children:o.a.map((l=>(0,i.tZ)(a.Z,{onClick:()=>t(l),selected:e===l,disabled:e===l,children:n("refinement",{value:l})},l)))})}},87051:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(31461),l=n(65992),o=n(83249),r=n(52903);const i=["children","disabled"],s=(0,l.ZP)(o.Z)((({theme:e})=>({"&.Mui-disabled":{backgroundColor:e.palette.primary.dark,color:e.palette.text.secondary}})));function c(e){let{children:t}=e,n=(0,a.Z)(e,i);return(0,r.tZ)(s,Object.assign({},n,{disabled:!0,children:t}))}},59236:(e,t,n)=>{n.d(t,{Z:()=>g});var a=n(31461),l=n(25674),o=n(67550),r=n(66198),i=n(36893),s=n(10618),c=n(65992),d=n(92794);const u=(0,c.ZP)(d.Z,{shouldForwardProp:e=>"baseColor"!==e&&"selectedColor"!==e})((({theme:e,baseColor:t="secondary",selectedColor:n="success"})=>({"&":{backgroundColor:e.palette[t].main,color:e.palette[t].contrastText},"&:hover":{backgroundColor:e.palette[t].dark},"&.Mui-selected":{backgroundColor:e.palette[n].main,color:e.palette[n].contrastText},"&.Mui-selected:hover":{backgroundColor:e.palette[n].dark},"&.Mui-disabled":{backgroundColor:e.palette[t].dark},"&.Mui-selected.Mui-disabled":{backgroundColor:e.palette[n].dark}})));var h=n(52972),Z=n(52903);const p=["value","totals","onChange"],m=(0,s.X)([...i.N]);function g(e){let{value:t,totals:n,onChange:s}=e,c=(0,a.Z)(e,p);return(0,Z.tZ)(l.Z,Object.assign({exclusive:!0,value:t},c,{children:i.N.map((e=>(0,Z.BX)(u,{value:e,sx:{minWidth:"7em"},selectedColor:e,onClick:()=>s(m(t,e)),children:[(0,Z.BX)(o.Z,{sx:{fontSize:"2em",lineHeight:1},children:[h.Z[e],"  "]}),(0,Z.tZ)(r.Z,{label:n[e],size:"small"})]},e)))}))}},62978:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(31461),l=n(92794),o=n(67550),r=n(66198),i=n(36893),s=n(10618),c=n(29432),d=n(71765),u=n(52903);const h=["value","totals","onChange"],Z=(0,s.X)([...i.wC]);function p(e){let{value:t,totals:n,onChange:s}=e,p=(0,a.Z)(e,h);return(0,u.tZ)(c.Z,Object.assign({exclusive:!0,value:t},p,{children:i.wC.map((e=>(0,u.tZ)(l.Z,{value:e,sx:{minWidth:"7em"},onClick:()=>s(Z(t,e)),children:(0,u.BX)(o.Z,{display:"flex",children:[(0,u.tZ)("strong",{children:e}),(0,u.tZ)(d.q,{stars:1}),(0,u.tZ)(r.Z,{label:n[e],size:"small"})]})},e)))}))}},29117:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(31461),l=n(92794),o=n(66198),r=n(79536),i=n(36893),s=n(10618),c=n(26578),d=n(29432),u=n(52903);const h=["value","totals","onChange"],Z=(0,s.X)([...i.yd]);function p(e){let{value:t,totals:n,onChange:s}=e,p=(0,a.Z)(e,h);return(0,u.tZ)(d.Z,Object.assign({exclusive:!0,value:t},p,{children:i.yd.map((e=>{var a;return(0,u.BX)(l.Z,{value:e,sx:{minWidth:"7em"},onClick:()=>s(Z(t,e)),children:[(0,u.tZ)(c.Z,{src:null==(a=r.Z.weaponTypes)?void 0:a[e],size:2})," ",(0,u.tZ)(o.Z,{label:n[e],size:"small"})]},e)}))}))}},89431:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var a=n(7671),l=n(41075),o=n(30609),r=n(56961),i=n(75213),s=n(67550),c=n(62197),d=n(2784),u=n(21548),h=n(79536),Z=n(71026),p=n(25870),m=n(25434),g=n(36893),f=n(40775),v=n(87985),b=n(67937),y=n(72055),x=n(26578),C=n(98927),w=n(71765),_=n(62978),k=n(29117),H=n(52903);function B({show:e,ascension:t=0,onHide:n,onSelect:B,filter:S=(()=>!0),weaponTypeFilter:P}){const{t:X}=(0,u.$G)(["page_weapon","weaponNames_gen"]),W=(0,m.Z)((()=>Z.Z.getAll),[]),[q,D]=(0,d.useState)(P?[P]:[...g.yd]),{database:V}=(0,d.useContext)(p.t),[I,M]=(0,d.useState)(V.displayWeapon.get());(0,d.useEffect)((()=>V.displayWeapon.follow(((e,t)=>M(t)))),[V]),(0,d.useEffect)((()=>P&&D([P])),[P]);const[z,O]=(0,d.useState)(""),T=(0,d.useDeferredValue)(z),{rarity:$}=I,R=(0,d.useMemo)((()=>W?g.fG.filter((e=>S(W(e)))).filter((e=>q.includes(W(e).weaponType))).filter((e=>!T||X(`weaponNames_gen:${e}`).toLowerCase().includes(T.toLowerCase()))).filter((e=>$.includes(W(e).rarity))).sort(((e,t)=>W(t).rarity-W(e).rarity)):[]),[T,S,$,X,q,W]),j=(0,d.useMemo)((()=>(0,f.W)(g.yd,(e=>W&&g.fG.forEach((t=>{const n=W(t).weaponType;e[n].total++,R.includes(t)&&e[n].current++}))))),[W,R]),N=(0,d.useMemo)((()=>(0,f.W)(g.wC,(e=>W&&g.fG.forEach((t=>{const n=W(t).rarity;e[n].total++,R.includes(t)&&e[n].current++}))))),[W,R]);return W?(0,H.tZ)(C.Z,{open:e,onClose:n,children:(0,H.BX)(v.Z,{children:[(0,H.tZ)(a.Z,{sx:{py:1},children:(0,H.BX)(l.ZP,{container:!0,spacing:1,children:[(0,H.tZ)(l.ZP,{item:!0,children:(0,H.tZ)(k.Z,{value:q,totals:j,onChange:D,disabled:!!P,size:"small"})}),(0,H.tZ)(l.ZP,{item:!0,children:(0,H.tZ)(_.Z,{sx:{height:"100%"},onChange:e=>V.displayWeapon.set({rarity:e}),value:$,totals:N,size:"small"})}),(0,H.tZ)(l.ZP,{item:!0,flexGrow:1,children:(0,H.tZ)(o.Z,{autoFocus:!0,size:"small",value:z,onChange:e=>O(e.target.value),label:X("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),(0,H.tZ)(l.ZP,{item:!0,children:(0,H.tZ)(y.Z,{onClick:n})})]})}),(0,H.tZ)(r.Z,{}),(0,H.tZ)(a.Z,{children:(0,H.tZ)(l.ZP,{container:!0,spacing:1,children:R.map((e=>{var a;const o=W(e);return(0,H.tZ)(l.ZP,{item:!0,lg:3,md:4,children:(0,H.tZ)(b.Z,{sx:{height:"100%"},children:(0,H.BX)(i.Z,{onClick:()=>{n(),B(e)},sx:{display:"flex"},children:[(0,H.tZ)(s.Z,{component:"img",src:o.getImg(t),sx:{width:100,height:"auto"},className:` grad-${o.rarity}star`}),(0,H.BX)(s.Z,{sx:{flexGrow:1,px:1},children:[(0,H.tZ)(c.Z,{variant:"subtitle1",children:o.name}),(0,H.BX)(c.Z,{children:[(0,H.tZ)(x.Z,{src:null==(a=h.Z.weaponTypes)?void 0:a[o.weaponType]})," ",(0,H.tZ)(w.q,{stars:o.rarity,colored:!0})]})]})]})})},e)}))})}),(0,H.tZ)(r.Z,{}),(0,H.tZ)(a.Z,{sx:{py:1},children:(0,H.tZ)(y.Z,{large:!0,onClick:n})})]})}):null}},2679:(e,t,n)=>{n.d(t,{WC:()=>_,KX:()=>H,SJ:()=>k,r:()=>V,Zu:()=>B,xm:()=>X,L1:()=>D,q8:()=>q,qp:()=>P,s_:()=>W,M:()=>S});var a=n(34958),l=n(30507),o=n(19807),r=n(61215),i=n(36893),s=n(41015),c=n(97797);const d=(0,c.lp)(a.qH.lvl,r.PO,o.ZP.info("crystallize_level_multi")),u=(0,c.WV)(40/9,(0,c.F9)(a.qH.total.eleMas,1400)),h=(0,c.ce)((0,c.WV)((0,c.ce)((0,c.Sm)(c.J_,u),Object.assign({pivot:!0},o.ZP.info("base_crystallize_multi"))),d),o.ZP.info("crystallize")),Z=(0,c.lp)(a.qH.lvl,r.P_,o.ZP.info("transformative_level_multi")),p=(0,c.WV)(16,(0,c.F9)(a.qH.total.eleMas,2e3)),m=Object.assign({},(0,s.O)(Object.keys(r.Ne),(e=>{const{multi:t,resist:n,canCrit:l}=r.Ne[e];return(0,c.ce)((0,c.WV)((0,c.WV)((0,c.a9)(t,o.ZP.info(`${e}_multi`)),Z),(0,c.Sm)((0,c.ce)((0,c.Sm)(c.J_,p),Object.assign({pivot:!0},o.ZP.info("base_transformative_multi"))),a.qH.total[`${e}_dmg_`]),(0,c.P5)(a.qH.hit.hitMode,{hit:c.J_,critHit:l?(0,c.Sm)(c.J_,a.qH.total[`${e}_critDMG_`]):c.J_,avgHit:l?(0,c.Sm)(c.J_,(0,c.WV)((0,c.ce)((0,c.Fp)((0,c.VV)(a.qH.total[`${e}_critRate_`],(0,c.Sm)(c.J_,c.J_)),c.zv),Object.assign({},a.qH.total[`${e}_critRate_`].info,{pivot:!0})),a.qH.total[`${e}_critDMG_`])):c.J_},NaN),a.qH.enemy[`${n}_resMulti`]),o.ZP.info(`${e}_hit`))})),{swirl:(0,s.O)(r.Ne.swirl.variants,(e=>{const t=(0,c.WV)((0,c.WV)((0,c.a9)(r.Ne.swirl.multi,o.ZP.info("swirl_multi")),Z),(0,c.Sm)((0,c.ce)((0,c.Sm)(c.J_,p),Object.assign({pivot:!0},o.ZP.info("base_transformative_multi"))),a.qH.total.swirl_dmg_)),n=a.qH.enemy[`${e}_resMulti`];return(0,c.ce)(["pyro","hydro","cryo","electro"].includes(e)?"electro"===e?(0,c.aT)((0,c.WV)((0,c.Sm)(t,a.qH.hit.addTerm),n),{hit:{ele:(0,c.a9)(e)}}):(0,c.aT)((0,c.WV)(t,n,a.qH.hit.ampMulti),{hit:{ele:(0,c.a9)(e)}}):(0,c.WV)(t,n),o.ZP.info(`${e}_swirl_hit`))}))}),g={overloaded:(0,c.ce)((0,c.Dg)(a._d,"pyro",m.overloaded),o.ZP.info("overloaded_hit")),electrocharged:(0,c.ce)((0,c.Dg)(a._d,"hydro",m.electrocharged),o.ZP.info("electrocharged_hit")),superconduct:(0,c.ce)((0,c.Dg)(a._d,"cryo",m.superconduct),o.ZP.info("superconduct_hit")),burning:(0,c.ce)((0,c.Dg)(a._d,"pyro",m.burning),o.ZP.info("burning_hit")),bloom:(0,c.ce)((0,c.Dg)(a._d,"hydro",m.bloom),o.ZP.info("bloom_hit")),burgeon:(0,c.ce)((0,c.Dg)(a._d,"pyro",m.burgeon),o.ZP.info("burgeon_hit"))},f={anemo:{electroSwirl:m.swirl.electro,pyroSwirl:m.swirl.pyro,cryoSwirl:m.swirl.cryo,hydroSwirl:m.swirl.hydro,overloaded:m.overloaded,electrocharged:m.electrocharged,superconduct:m.superconduct,shattered:m.shattered,burning:m.burning,bloom:m.bloom,burgeon:m.burgeon,hyperbloom:m.hyperbloom},geo:Object.assign({crystallize:h},Object.fromEntries(i.gs.map((e=>[`${e}Crystallize`,(0,c.ce)((0,c.WV)((0,c.aQ)(2.5),h),o.ZP.info(`${e}_crystallize`))]))),{shattered:m.shattered,overloaded:g.overloaded,electrocharged:g.electrocharged,superconduct:g.superconduct,burning:g.burning,bloom:g.bloom,burgeon:g.burgeon}),electro:{overloaded:m.overloaded,electrocharged:m.electrocharged,superconduct:m.superconduct,shattered:m.shattered,hyperbloom:m.hyperbloom,burning:g.burning,bloom:g.bloom,burgeon:g.burgeon},hydro:{electrocharged:m.electrocharged,shattered:m.shattered,bloom:m.bloom,overloaded:g.overloaded,superconduct:g.superconduct,burning:g.burning,burgeon:g.burgeon},pyro:{overloaded:m.overloaded,shattered:m.shattered,burning:m.burning,burgeon:m.burgeon,electrocharged:g.electrocharged,superconduct:g.superconduct,bloom:g.bloom},cryo:{superconduct:m.superconduct,shattered:m.shattered,overloaded:g.overloaded,electrocharged:g.electrocharged,burning:g.burning,bloom:g.bloom,burgeon:g.burgeon},dendro:{shattered:m.shattered,burning:m.burning,bloom:m.bloom,overloaded:g.overloaded,electrocharged:g.electrocharged,superconduct:g.superconduct,burgeon:g.burgeon}};var v=n(69190);const b=JSON.parse('{"GROW_CURVE_HP_S4":{"1":1,"2":1.083,"3":1.165,"4":1.248,"5":1.33,"6":1.413,"7":1.495,"8":1.578,"9":1.661,"10":1.743,"11":1.826,"12":1.908,"13":1.991,"14":2.073,"15":2.156,"16":2.239,"17":2.321,"18":2.404,"19":2.486,"20":2.569,"21":2.651,"22":2.734,"23":2.817,"24":2.899,"25":2.982,"26":3.064,"27":3.147,"28":3.229,"29":3.312,"30":3.394,"31":3.477,"32":3.56,"33":3.642,"34":3.725,"35":3.807,"36":3.89,"37":3.972,"38":4.055,"39":4.138,"40":4.22,"41":4.303,"42":4.385,"43":4.468,"44":4.55,"45":4.633,"46":4.716,"47":4.798,"48":4.881,"49":4.963,"50":5.046,"51":5.128,"52":5.211,"53":5.294,"54":5.376,"55":5.459,"56":5.541,"57":5.624,"58":5.706,"59":5.789,"60":5.872,"61":5.954,"62":6.037,"63":6.119,"64":6.202,"65":6.284,"66":6.367,"67":6.45,"68":6.532,"69":6.615,"70":6.697,"71":6.78,"72":6.862,"73":6.945,"74":7.028,"75":7.11,"76":7.193,"77":7.275,"78":7.358,"79":7.44,"80":7.523,"81":7.606,"82":7.688,"83":7.771,"84":7.853,"85":7.936,"86":8.018,"87":8.101,"88":8.183,"89":8.266,"90":8.349,"91":8.431,"92":8.514,"93":8.596,"94":8.679,"95":8.761,"96":8.844,"97":8.927,"98":9.009,"99":9.092,"100":9.174},"GROW_CURVE_ATTACK_S4":{"1":1,"2":1.083,"3":1.165,"4":1.248,"5":1.33,"6":1.413,"7":1.495,"8":1.578,"9":1.661,"10":1.743,"11":1.826,"12":1.908,"13":1.991,"14":2.073,"15":2.156,"16":2.239,"17":2.321,"18":2.404,"19":2.486,"20":2.569,"21":2.651,"22":2.734,"23":2.817,"24":2.899,"25":2.982,"26":3.064,"27":3.147,"28":3.229,"29":3.312,"30":3.394,"31":3.477,"32":3.56,"33":3.642,"34":3.725,"35":3.807,"36":3.89,"37":3.972,"38":4.055,"39":4.138,"40":4.22,"41":4.303,"42":4.385,"43":4.468,"44":4.55,"45":4.633,"46":4.716,"47":4.798,"48":4.881,"49":4.963,"50":5.046,"51":5.128,"52":5.211,"53":5.294,"54":5.376,"55":5.459,"56":5.541,"57":5.624,"58":5.706,"59":5.789,"60":5.872,"61":5.954,"62":6.037,"63":6.119,"64":6.202,"65":6.284,"66":6.367,"67":6.45,"68":6.532,"69":6.615,"70":6.697,"71":6.78,"72":6.862,"73":6.945,"74":7.028,"75":7.11,"76":7.193,"77":7.275,"78":7.358,"79":7.44,"80":7.523,"81":7.606,"82":7.688,"83":7.771,"84":7.853,"85":7.936,"86":8.018,"87":8.101,"88":8.183,"89":8.266,"90":8.349,"91":8.431,"92":8.514,"93":8.596,"94":8.679,"95":8.761,"96":8.844,"97":8.927,"98":9.009,"99":9.092,"100":9.174},"GROW_CURVE_HP_S5":{"1":1,"2":1.083,"3":1.166,"4":1.25,"5":1.333,"6":1.417,"7":1.5,"8":1.584,"9":1.668,"10":1.751,"11":1.835,"12":1.919,"13":2.003,"14":2.088,"15":2.172,"16":2.256,"17":2.341,"18":2.425,"19":2.51,"20":2.594,"21":2.679,"22":2.764,"23":2.849,"24":2.934,"25":3.019,"26":3.105,"27":3.19,"28":3.275,"29":3.361,"30":3.446,"31":3.532,"32":3.618,"33":3.704,"34":3.789,"35":3.875,"36":3.962,"37":4.048,"38":4.134,"39":4.22,"40":4.307,"41":4.393,"42":4.48,"43":4.567,"44":4.653,"45":4.74,"46":4.827,"47":4.914,"48":5.001,"49":5.089,"50":5.176,"51":5.263,"52":5.351,"53":5.438,"54":5.526,"55":5.614,"56":5.702,"57":5.79,"58":5.878,"59":5.966,"60":6.054,"61":6.142,"62":6.23,"63":6.319,"64":6.407,"65":6.496,"66":6.585,"67":6.673,"68":6.762,"69":6.851,"70":6.94,"71":7.029,"72":7.119,"73":7.208,"74":7.297,"75":7.387,"76":7.476,"77":7.566,"78":7.656,"79":7.746,"80":7.836,"81":7.926,"82":8.016,"83":8.106,"84":8.196,"85":8.286,"86":8.377,"87":8.467,"88":8.558,"89":8.649,"90":8.739,"91":8.83,"92":8.921,"93":9.012,"94":9.103,"95":9.195,"96":9.286,"97":9.377,"98":9.469,"99":9.56,"100":9.652},"GROW_CURVE_ATTACK_S5":{"1":1,"2":1.083,"3":1.166,"4":1.25,"5":1.333,"6":1.417,"7":1.5,"8":1.584,"9":1.668,"10":1.751,"11":1.835,"12":1.919,"13":2.003,"14":2.088,"15":2.172,"16":2.256,"17":2.341,"18":2.425,"19":2.51,"20":2.594,"21":2.679,"22":2.764,"23":2.849,"24":2.934,"25":3.019,"26":3.105,"27":3.19,"28":3.275,"29":3.361,"30":3.446,"31":3.532,"32":3.618,"33":3.704,"34":3.789,"35":3.875,"36":3.962,"37":4.048,"38":4.134,"39":4.22,"40":4.307,"41":4.393,"42":4.48,"43":4.567,"44":4.653,"45":4.74,"46":4.827,"47":4.914,"48":5.001,"49":5.089,"50":5.176,"51":5.263,"52":5.351,"53":5.438,"54":5.526,"55":5.614,"56":5.702,"57":5.79,"58":5.878,"59":5.966,"60":6.054,"61":6.142,"62":6.23,"63":6.319,"64":6.407,"65":6.496,"66":6.585,"67":6.673,"68":6.762,"69":6.851,"70":6.94,"71":7.029,"72":7.119,"73":7.208,"74":7.297,"75":7.387,"76":7.476,"77":7.566,"78":7.656,"79":7.746,"80":7.836,"81":7.926,"82":8.016,"83":8.106,"84":8.196,"85":8.286,"86":8.377,"87":8.467,"88":8.558,"89":8.649,"90":8.739,"91":8.83,"92":8.921,"93":9.012,"94":9.103,"95":9.195,"96":9.286,"97":9.377,"98":9.469,"99":9.56,"100":9.652}}'),y=(0,s.xh)(b,(e=>[0,...Object.values(e)])),x=(0,s.O)(["hp","atk","def","eleMas","enerRech_","critRate_","critDMG_","heal_"],(e=>a.qH.total[e])),C=(0,c.Qq)((0,c.P5)(a.qH.hit.move,{skill:a.qH.charEle,burst:a.qH.charEle},void 0),(0,c.P5)(a.qH.weaponType,{sword:a._d,claymore:a._d,polearm:a._d,catalyst:a.qH.charEle},void 0),"physical");function w(e){switch(e){case"normal":case"charged":case"plunging":return"auto";case"skill":return"skill";case"burst":return"burst"}}function _(e,t,n={}){var o;return(0,c.aT)(a.qH.hit.dmg,(0,l.b3)([{hit:{base:e,move:(0,c.a9)(t),ele:null!=n&&null!=(o=n.hit)&&o.ele?void 0:C}},n]))}function k(e,t){const n=(0,c.WV)(e,(0,c.Sm)(c.J_,a.qH.total.shield_));return t?(0,c.aT)(n,t):n}function H(e,t){const n=a.qH.total.healInc,l=(0,c.WV)((0,c.Sm)(e,n),(0,c.Sm)(c.J_,a.qH.total.heal_,a.qH.total.incHeal_));return t?(0,c.aT)(l,t):l}function B(e,t,n,l={},o){const r=w(n);return _(o?(0,c.WV)((0,c.lp)(a.qH.total[`${r}Index`],t,{unit:"%"}),a.qH.total[e],o):(0,c.WV)((0,c.lp)(a.qH.total[`${r}Index`],t,{unit:"%"}),a.qH.total[e]),n,l)}function S(e,t,n,l={}){const o=w(n);return _((0,c.Sm)(...e.map(((e,n)=>(0,c.WV)((0,c.lp)(a.qH.total[`${o}Index`],t[n],{unit:"%"}),a.qH.total[e])))),n,l)}function P(e,t,n,l){return k((0,c.Sm)((0,c.WV)(t,a.qH.total[e]),n),l)}function X(e,t,n,l){return H((0,c.Sm)((0,c.WV)(t,a.qH.total[e]),n),l)}function W(e,t,n,l,o){const r=w(l),i=a.qH.total[`${r}Index`];return k((0,c.Sm)((0,c.WV)((0,c.lp)(i,t,{unit:"%"}),a.qH.total[e]),(0,c.lp)(i,n)),o)}function q(e,t){return(0,c.ce)((0,c.WV)((0,c.aQ)("geo"===e?1.5:2.5),t),{variant:e})}function D(e,t,n,l,o){const r=w(l),i=a.qH.total[`${r}Index`];return H((0,c.Sm)((0,c.WV)((0,c.lp)(i,t,{unit:"%"}),a.qH.total[e]),(0,c.lp)(i,n)),o)}function V(e,t,n,r,i,d={}){i.basic=Object.assign({},x);const u={charKey:(0,c.a9)(e),base:{},weaponType:(0,c.a9)(r.weaponTypeKey),premod:{},display:i};let h;t&&(u.charEle=(0,c.a9)(t),u.teamBuff={tally:{[t]:(0,c.a9)(1)}},u.display.basic[`${t}_dmg_`]=a.qH.total[`${t}_dmg_`],u.display.reaction=f[t]),n&&(0,s.SR)(u,["teamBuff","tally",n],(0,c.a9)(1)),(0,s.SR)(u,["teamBuff","tally","maxEleMas"],a.qH.premod.eleMas),"catalyst"!==r.weaponTypeKey&&(u.display.basic||(u.display.basic={}),u.display.basic.physical_dmg_=a.qH.total.physical_dmg_);for(const l of[...v.r,"def"]){const e=[];r.curves[l]&&e.push((Z=r.base[l],p=r.curves[l],(0,c.WV)(Z,(0,c.lp)(a.qH.lvl,y[p]))));if(r.ascensions.some((e=>e.props[l]))&&e.push((0,c.lp)(a.qH.asc,r.ascensions.map((e=>{var t;return null!=(t=e.props[l])?t:NaN})))),!e.length)continue;const t=(0,c.ce)(1===e.length?e[0]:(0,c.Sm)(...e),Object.assign({},o.ZP.info(l),{prefix:"char",asConst:!0}));if(l.endsWith("_dmg_")&&(t.info.variant=l.slice(0,-5)),"atk"===l||"def"===l||"hp"===l)u.base[l]=t;else{if(h)throw new Error("Duplicated Char Special");h=!0,u.special=t,u.premod[l]=a.qH.special}}var Z,p;return(0,l.b3)([u,(0,l.d1)(d)])}},1296:(e,t,n)=>{n.r(t),n.d(t,{default:()=>K});var a=n(31461),l=n(16068),o=n(66147),r=n(7671),i=n(67550),s=n(30609),c=n(56961),d=n(41075),u=n(65992),h=n(99479),Z=n(43894),p=n(85801),m=n(75213),g=n(62197),f=n(2784),v=n(21548),b=n(87985),y=n(67937),x=n(50875),C=n(72055),w=n(98927),_=n(46026),k=n(83673),H=n(71765),B=n(59236),S=n(29117),P=n(790),X=n(13913),W=n(21626),q=n(25870),D=n(44304),V=n(32560),I=n(10002),M=n(36617),z=n(25434),O=n(36893),T=n(45069),$=n(1661),R=n(40775),j=n(52903);const N=["className"],G=Object.keys(T.V3);function K({show:e,onHide:t,onSelect:n,filter:a=(()=>!0),newFirst:l=!1}){const{t:o}=(0,v.$G)(["page_character","charNames_gen"]),{database:u}=(0,f.useContext)(q.t),[h,Z]=(0,f.useState)((()=>u.displayCharacter.get()));(0,f.useEffect)((()=>u.displayCharacter.follow(((e,t)=>Z(t)))),[u,Z]);const p=(0,z.Z)((()=>X.Z.getAll),[]),[m,g]=(0,M.Z)();(0,f.useEffect)((()=>u.charMeta.followAny((e=>g()))),[g,u]);const[y,x]=(0,f.useState)(""),k=(0,f.useDeferredValue)(y),H=(0,f.useDeferredValue)(h),W=(0,f.useDeferredValue)(m),D=(0,f.useMemo)((()=>{var e;if(!p)return[];const{element:t,weaponType:n,sortType:o,ascending:r}=H,i=[...l?["new"]:[],...null!=(e=T.V3[o])?e:[]];return W&&O.IV.filter((e=>a(u.chars.get(e),p[e]))).filter((0,$.C)({element:t,weaponType:n,name:k},(0,T.zU)(u,p))).sort((0,$.e)(i,r,(0,T._L)(u,p),["new","favorite"]))}),[u,l,H,p,W,k,a]),V=(0,f.useMemo)((()=>(0,R.W)(O.yd,(e=>p&&O.IV.forEach((t=>{const n=p(t,u.gender).weaponTypeKey;e[n].total++,D.includes(t)&&e[n].current++}))))),[p,D,u]),I=(0,f.useMemo)((()=>(0,R.W)(O.N,(e=>p&&O.IV.forEach((t=>{const n=p(t,u.gender).elementKey;e[n].total++,D.includes(t)&&e[n].current++}))))),[p,D,u]);if(!p)return null;const{weaponType:N,element:K,sortType:E,ascending:J}=h;return(0,j.tZ)(w.Z,{open:e,onClose:t,sx:{"& .MuiContainer-root":{justifyContent:"normal"}},children:(0,j.BX)(b.Z,{children:[(0,j.BX)(r.Z,{sx:{py:1,display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[(0,j.tZ)(S.Z,{sx:{height:"100%"},onChange:e=>u.displayCharacter.set({weaponType:e}),value:N,totals:V,size:"small"}),(0,j.tZ)(B.Z,{sx:{height:"100%"},onChange:e=>u.displayCharacter.set({element:e}),value:K,totals:I,size:"small"}),(0,j.tZ)(i.Z,{flexGrow:1,children:(0,j.tZ)(s.Z,{autoFocus:!0,value:y,onChange:e=>x(e.target.value),label:o("characterName"),size:"small",sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),(0,j.tZ)(_.Z,{sx:{height:"100%"},sortKeys:G,value:E,onChange:e=>u.displayCharacter.set({sortType:e}),ascending:J,onChangeAsc:e=>u.displayCharacter.set({ascending:e})}),(0,j.tZ)(C.Z,{onClick:t})]}),(0,j.tZ)(c.Z,{}),(0,j.tZ)(P.R.Provider,{value:{teamData:void 0},children:(0,j.tZ)(r.Z,{children:(0,j.tZ)(d.ZP,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:5},children:D.map((e=>(0,j.tZ)(d.ZP,{item:!0,xs:1,children:(0,j.tZ)(L,{characterKey:e,onClick:()=>{t(),null==n||n(e)}})},e)))})})})]})})}const E=(0,u.ZP)((e=>{let{className:t}=e,n=(0,a.Z)(e,N);return(0,j.tZ)(h.Z,Object.assign({},n,{classes:{popper:t}}))}))({[`& .${Z.Z.tooltip}`]:{padding:0}});function L({characterKey:e,onClick:t}){var n;const{gender:a}=(0,I.Z)(),r=(0,z.Z)((()=>X.Z.get(e,a)),[e,a]),s=(0,D.Z)(e),{favorite:c}=(0,V.Z)(e),{database:d}=(0,f.useContext)(q.t),[u,h]=(0,f.useState)(!1),Z=(0,f.useCallback)((()=>h(!1)),[]),v=(0,f.useCallback)((()=>h(!0)),[]),{level:b=1,ascension:C=0,constellation:w=0}=null!=s?s:{};return(0,j.tZ)(E,{enterDelay:300,enterNextDelay:300,arrow:!0,placement:"bottom",open:u,onClose:Z,onOpen:v,title:(0,j.tZ)(i.Z,{sx:{width:300},children:(0,j.tZ)(x.Z,{hideStats:!0,characterKey:e})}),children:(0,j.tZ)(i.Z,{children:(0,j.BX)(y.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[(0,j.tZ)(i.Z,{sx:{position:"absolute",opacity:.7,zIndex:2},children:(0,j.tZ)(p.Z,{sx:{p:.25},onClick:t=>{h(!1),d.charMeta.set(e,{favorite:!c})},children:c?(0,j.tZ)(l.Z,{}):(0,j.tZ)(o.Z,{})})}),(0,j.tZ)(m.Z,{onClick:t,children:(0,j.BX)(i.Z,{display:"flex",position:"relative",className:`grad-${null==r?void 0:r.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.5,backgroundImage:`url(${null==r?void 0:r.bannerImg})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[(0,j.tZ)(i.Z,{flexShrink:1,sx:{maxWidth:{xs:"33%",lg:"30%"}},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,children:(0,j.tZ)(i.Z,{component:"img",src:null==r?void 0:r.thumbImg,width:"100%",height:"auto",maxWidth:256,sx:{mt:"auto"}})}),(0,j.BX)(i.Z,{flexGrow:1,sx:{pr:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly",children:[(0,j.tZ)(g.Z,{variant:"body2",sx:{flexGrow:1},children:(0,j.tZ)(k.Z,{color:null==r?void 0:r.elementKey,sx:{opacity:.85,textShadow:"0 0 5px gray"},children:null==r?void 0:r.name})}),s?(0,j.BX)(i.Z,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,j.BX)(i.Z,{sx:{textShadow:"0 0 5px gray"},children:[(0,j.BX)(g.Z,{variant:"body2",component:"span",whiteSpace:"nowrap",children:["Lv. ",b]}),(0,j.BX)(g.Z,{variant:"body2",component:"span",color:"text.secondary",children:["/",W.SJ[C]]})]}),(0,j.BX)(g.Z,{variant:"body2",children:["C",w]})]}):(0,j.tZ)(g.Z,{component:"span",variant:"body2",children:(0,j.tZ)(k.Z,{children:"NEW"})}),(0,j.tZ)(g.Z,{variant:"body2",children:(0,j.tZ)(H.q,{stars:null!=(n=null==r?void 0:r.rarity)?n:1,colored:!0})})]})]})})]})})})}},3694:(e,t,n)=>{n.d(t,{Z:()=>M});var a=n(9725),l=n(67732),o=n(54278),r=n(40535),i=n(75213),s=n(67550),c=n(79906),d=n(85801),u=n(62197),h=n(7671),Z=n(38553),p=n(99479),m=n(83249),g=n(2784),f=n(21548),v=n(79536),b=n(67937),y=n(43007),x=n(37923),C=n(57889),w=n(26578),_=n(71765),k=n(21626),H=n(71026),B=n(25870),S=n(34958),P=n(30507),X=n(61278),W=n(25434),q=n(94758),D=n(52903);let V,I=e=>e;function M({weaponId:e,onClick:t,onEdit:n,onDelete:M,canEquip:z=!1,extraButtons:O}){var T;const{t:$}=(0,f.$G)(["page_weapon","ui"]),{database:R}=(0,g.useContext)(B.t),j=(0,q.Z)(e),N=(0,W.Z)((()=>null!=j&&j.key?H.Z.get(j.key):void 0),[null==j?void 0:j.key]),G=(0,g.useCallback)((e=>e.weaponTypeKey===(null==N?void 0:N.weaponType)),[N]),K=(0,g.useCallback)((n=>(0,D.tZ)(i.Z,{onClick:()=>null==t?void 0:t(e),children:n})),[t,e]),E=(0,g.useCallback)((e=>(0,D.tZ)(s.Z,{children:e})),[]),L=(0,g.useCallback)((t=>e&&R.weapons.set(e,{location:t})),[R,e]),J=(0,g.useMemo)((()=>N&&j&&(0,P.mP)([N.data,(0,P.v0)(j)])),[N,j]);if(!j||!N||!J)return null;const{level:A,ascension:F,refinement:U,id:Y,location:Q="",lock:ee}=j,te=J.get(S.ri.weapon.type).value,ne=[S.ri.weapon.main,S.ri.weapon.sub,S.ri.weapon.sub2].map((e=>J.get(e))),ae=N.getImg(F);return(0,D.tZ)(g.Suspense,{fallback:(0,D.tZ)(c.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:(0,D.BX)(b.Z,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,D.BX)(C.Z,{condition:!!t,wrapper:K,falseWrapper:E,children:[(0,D.BX)(s.Z,{className:`grad-${N.rarity}star`,sx:{position:"relative",pt:2,px:2},children:[!t&&(0,D.tZ)(d.Z,{color:"primary",onClick:()=>R.weapons.set(Y,{lock:!ee}),sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:ee?(0,D.tZ)(o.Z,{}):(0,D.tZ)(r.Z,{})}),(0,D.BX)(s.Z,{sx:{position:"relative",zIndex:1},children:[(0,D.BX)(s.Z,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,D.tZ)(w.Z,{sx:{fontSize:"1.5em"},src:null==(T=v.Z.weaponTypes)?void 0:T[te]}),(0,D.tZ)(u.Z,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:(0,D.tZ)("strong",{children:N.name})})]}),(0,D.BX)(u.Z,{component:"span",variant:"h5",children:["Lv. ",A]}),(0,D.BX)(u.Z,{component:"span",variant:"h5",color:"text.secondary",children:["/",k.SJ[F]]}),(0,D.BX)(u.Z,{variant:"h6",children:["Refinement ",(0,D.tZ)("strong",{children:U})]}),(0,D.tZ)(u.Z,{children:(0,D.tZ)(_.q,{stars:N.rarity,colored:!0})})]}),(0,D.tZ)(s.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,D.tZ)(s.Z,{component:"img",src:null!=ae?ae:"",width:"auto",height:"100%",sx:{float:"right"}})})]}),(0,D.tZ)(h.Z,{children:ne.map((e=>e.info.name?(0,D.BX)(s.Z,{sx:{display:"flex"},children:[(0,D.BX)(u.Z,{flexGrow:1,children:[e.info.icon," ",e.info.name]}),(0,D.tZ)(u.Z,{children:(0,X.p)(e)})]},JSON.stringify(e.info)):null))})]}),(0,D.BX)(s.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[(0,D.tZ)(s.Z,{sx:{flexGrow:1},children:z?(0,D.tZ)(y.W,{location:Q,setLocation:L,filter:G,autoCompleteProps:{getOptionDisabled:e=>!e.key,disableClearable:!0}}):(0,D.tZ)(x.Z,{location:Q})}),(0,D.BX)(Z.Z,{sx:{height:"100%"},children:[!!n&&(0,D.tZ)(p.Z,{title:(0,D.tZ)(u.Z,{children:$(V||(V=I`page_weapon:edit`))}),placement:"top",arrow:!0,children:(0,D.tZ)(m.Z,{color:"info",onClick:()=>n(Y),children:(0,D.tZ)(l.G,{icon:a.Xcf,className:"fa-fw"})})}),!!M&&(0,D.tZ)(m.Z,{color:"error",onClick:()=>M(Y),disabled:!!Q||ee,children:(0,D.tZ)(l.G,{icon:a.I7k,className:"fa-fw"})}),O]})]})]})})}},15878:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var a=n(54278),l=n(40535),o=n(7671),r=n(41075),i=n(67550),s=n(62197),c=n(38553),d=n(83249),u=n(42523),h=n(56961),Z=n(15873),p=n(2784),m=n(87985),g=n(67937),f=n(43007),v=n(72055),b=n(73740),y=n(64919),x=n(97859),C=n(98927),w=n(14520),_=n(71765),k=n(790),H=n(13913),B=n(21626),S=n(71026),P=n(25870),X=n(34958),W=n(30507),q=n(94657),D=n(10002),V=n(25434),I=n(94758),M=n(52903);const z=p.lazy((()=>n.e(592).then(n.bind(n,89431))));function O({weaponId:e,footer:t=!1,onClose:n,extraButtons:O}){var T;const{data:$}=(0,p.useContext)(k.R),{database:R}=(0,p.useContext)(P.t),j=(0,I.Z)(e),{key:N="",level:G=0,refinement:K=1,ascension:E=0,lock:L,location:J="",id:A}=null!=j?j:{},F=(0,V.Z)((()=>S.Z.get(N)),[N]),U=(0,p.useCallback)((t=>{R.weapons.set(e,t)}),[e,R]),{gender:Y}=(0,D.Z)(),Q=(0,V.Z)((()=>J?H.Z.get(R.chars.LocationToCharacterKey(J),Y):void 0),[R,Y,J]),ee=Q&&Q.weaponTypeKey,te=(0,p.useCallback)((e=>A&&R.weapons.set(A,{location:e})),[R,A]),ne=(0,p.useCallback)((e=>e.weaponTypeKey===(null==F?void 0:F.weaponType)),[F]),[ae,le,oe]=(0,q.Z)(),re=null==F?void 0:F.getImg(E);(0,p.useEffect)((()=>{if(F&&U&&F.key===(null==j?void 0:j.key)&&F.rarity<=2&&(G>70||E>4)){const[e,t]=B.vF[0];U({level:e,ascension:t})}}),[F,j,U,G,E]);const ie=(0,p.useMemo)((()=>F&&j&&(0,W.mP)([F.data,(0,W.v0)(j)])),[F,j]);return(0,M.tZ)(C.Z,{open:!!e,onClose:n,containerProps:{maxWidth:"md"},children:(0,M.BX)(g.Z,{children:[(0,M.tZ)(z,{ascension:E,show:ae,onHide:oe,onSelect:e=>U({key:e}),weaponTypeFilter:ee}),(0,M.tZ)(o.Z,{children:F&&ie&&(0,M.BX)(r.ZP,{container:!0,spacing:1.5,children:[(0,M.tZ)(r.ZP,{item:!0,xs:12,sm:3,children:(0,M.BX)(r.ZP,{container:!0,spacing:1.5,children:[(0,M.tZ)(r.ZP,{item:!0,xs:6,sm:12,children:(0,M.tZ)(i.Z,{component:"img",src:re,className:`grad-${F.rarity}star`,sx:{maxWidth:256,width:"100%",height:"auto",borderRadius:1}})}),(0,M.tZ)(r.ZP,{item:!0,xs:6,sm:12,children:(0,M.tZ)(s.Z,{children:(0,M.tZ)("small",{children:F.description})})})]})}),(0,M.BX)(r.ZP,{item:!0,xs:12,sm:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,M.tZ)(i.Z,{display:"flex",gap:1,flexWrap:"wrap",justifyContent:"space-between",children:(0,M.BX)(c.Z,{children:[(0,M.tZ)(d.Z,{color:"info",onClick:le,children:null!=(T=null==F?void 0:F.name)?T:"Select a Weapon"}),(null==F?void 0:F.hasRefinement)&&(0,M.tZ)(w.Z,{refinement:K,setRefinement:e=>U({refinement:e})}),O]})}),(0,M.BX)(i.Z,{display:"flex",gap:1,flexWrap:"wrap",justifyContent:"space-between",children:[F&&(0,M.tZ)(x.Z,{level:G,ascension:E,setBoth:U,useLow:!F.hasRefinement}),(0,M.tZ)(d.Z,{color:"error",onClick:()=>A&&R.weapons.set(A,{lock:!L}),startIcon:L?(0,M.tZ)(a.Z,{}):(0,M.tZ)(l.Z,{}),children:L?"Locked":"Unlocked"})]}),(0,M.tZ)(s.Z,{children:(0,M.tZ)(_.q,{stars:F.rarity})}),(0,M.tZ)(s.Z,{variant:"subtitle1",children:(0,M.tZ)("strong",{children:F.passiveName})}),(0,M.tZ)(s.Z,{gutterBottom:!0,children:F.passiveName&&F.passiveDescription(ie.get(X.ri.weapon.refineIndex).value)}),(0,M.BX)(i.Z,{display:"flex",flexDirection:"column",gap:1,children:[(0,M.BX)(m.Z,{children:[(0,M.tZ)(u.Z,{title:"Main Stats",titleTypographyProps:{variant:"subtitle2"}}),(0,M.tZ)(h.Z,{}),(0,M.tZ)(y.lD,{children:[X.ri.weapon.main,X.ri.weapon.sub,X.ri.weapon.sub2].map((e=>{const t=ie.get(e);return t.isEmpty||!t.value?null:(0,M.tZ)(y.JW,{node:t,component:Z.ZP},JSON.stringify(t.info))}))})]}),$&&F.document&&(0,M.tZ)(b.Z,{sections:F.document})]})]})]})}),t&&A&&(0,M.tZ)(o.Z,{sx:{py:1},children:(0,M.BX)(r.ZP,{container:!0,spacing:1,children:[(0,M.tZ)(r.ZP,{item:!0,flexGrow:1,children:(0,M.tZ)(f.W,{location:J,setLocation:te,filter:ne,autoCompleteProps:{getOptionDisabled:e=>!e.key,disableClearable:!0}})}),(0,M.tZ)(r.ZP,{item:!0,flexGrow:2}),!!n&&(0,M.tZ)(r.ZP,{item:!0,children:(0,M.tZ)(v.Z,{sx:{height:"100%"},large:!0,onClick:n})})]})})]})})}}}]);