"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[465],{24991:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});var a=n(9725),l=n(67732),r=n(92252),c=n(85439),i=n(36380),s=n(61391),o=n(60319),h=n(46342),Z=n(67550),d=n(7671),u=n(41075),p=n(30609),m=n(5896),g=n(83249),f=n(79906),y=n(56961),w=n(62197),x=n(85801),C=n(2784),b=n(61877),v=n(21548),k=n(73557),P=n(7300),S=n(87985),$=n(50875),T=n(46026),N=n(59236),X=n(29117),B=n(13913),I=n(71026),K=n(25870),j=n(97856),z=n(10002),L=n(36617),W=n(82716),E=n(25434),M=n(36893),V=n(45069),A=n(1661),D=n(40775),G=n(41015),O=n(52903);let _,H=e=>e;const F=C.lazy((()=>n.e(592).then(n.bind(n,1296)))),q={xs:1,sm:2,md:3,lg:4,xl:4},R={xs:6,sm:8,md:12,lg:16,xl:16},U=Object.keys(V.V3);function Y(){const{t:e}=(0,v.$G)(["page_character","charNames_gen"]),{database:t}=(0,C.useContext)(K.t),[n,Y]=(0,C.useState)((()=>t.displayCharacter.get()));(0,C.useEffect)((()=>t.displayCharacter.follow(((e,t)=>Y(t)))),[t,Y]);const[Q,ee]=(0,C.useState)(""),te=(0,C.useDeferredValue)(Q),ne=(0,C.useRef)(null),ae=(0,C.useCallback)(((e,n)=>{var a;null==(a=ne.current)||a.scrollIntoView({behavior:"smooth"}),t.displayCharacter.set({pageIndex:n-1})}),[t,ne]),le=(0,W.Z)(),re=R[le],[ce,ie]=(0,C.useState)(!1),[se,oe]=(0,L.Z)();(0,C.useEffect)((()=>(b.ZP.send({hitType:"pageview",page:"/characters"}),t.chars.followAny(((e,t)=>("new"===t||"remove"===t)&&oe())))),[oe,t]),(0,C.useEffect)((()=>t.charMeta.followAny((e=>oe()))),[oe,t]);const he=(0,E.Z)((()=>B.Z.getAll),[]),{gender:Ze}=(0,z.Z)(),de=(0,C.useCallback)((async n=>{const a=await B.Z.get(n,Ze);let l=null==a?void 0:a.name;"object"==typeof l&&(l=e(`charNames_gen:${(0,M.LP)(n,Ze)}`)),window.confirm(e("removeCharacter",{value:l}))&&t.chars.remove(n)}),[t,Ze,e]),ue=(0,j.Z)(),pe=(0,k.s0)(),me=(0,C.useDeferredValue)(n),ge=(0,C.useDeferredValue)(se),{charKeyList:fe,totalCharNum:ye}=(0,C.useMemo)((()=>{var e;const n=t.chars.keys.length;if(!he)return{charKeyList:[],totalCharNum:n};const{element:a,weaponType:l,sortType:r,ascending:c}=me,i=t.chars.keys.filter((0,A.C)({element:a,weaponType:l,name:te},(0,V.zU)(t,he))).sort((0,A.e)(null!=(e=V.V3[r])?e:[],c,(0,V._L)(t,he),["new","favorite"]));return ge&&{charKeyList:i,totalCharNum:n}}),[ge,t,he,me,te]),{weaponType:we,element:xe,sortType:Ce,ascending:be,pageIndex:ve=0}=n,{charKeyListToShow:ke,numPages:Pe,currentPageIndex:Se}=(0,C.useMemo)((()=>{const e=Math.ceil(fe.length/re),t=(0,G.uZ)(ve,0,e-1);return{charKeyListToShow:fe.slice(t*re,(t+1)*re),numPages:e,currentPageIndex:t}}),[fe,ve,re]),$e=fe.length!==ye?`${fe.length}/${ye}`:`${ye}`,Te=(0,E.Z)((()=>I.Z.getAll),[]),Ne=(0,C.useMemo)((()=>(0,D.W)(M.yd,(e=>Te&&Object.entries(t.chars.data).forEach((([n,a])=>{const l=t.weapons.get(a.equippedWeapon);if(!l)return;const r=Te(l.key).weaponType;e[r].total++,fe.includes(n)&&e[r].current++}))))),[Te,t,fe]),Xe=(0,C.useMemo)((()=>(0,D.W)(M.N,(e=>he&&Object.entries(t.chars.data).forEach((([n,a])=>{const l=he(a.key,t.gender).elementKey;e[l].total++,fe.includes(n)&&e[l].current++}))))),[he,t,fe]);return(0,O.BX)(Z.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:[(0,O.tZ)(C.Suspense,{fallback:!1,children:(0,O.tZ)(F,{newFirst:!0,show:ce,onHide:()=>ie(!1),onSelect:ue})}),(0,O.tZ)(S.Z,{ref:ne,children:(0,O.BX)(d.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,O.BX)(u.ZP,{container:!0,spacing:1,children:[(0,O.tZ)(u.ZP,{item:!0,children:(0,O.tZ)(X.Z,{sx:{height:"100%"},onChange:e=>t.displayCharacter.set({weaponType:e}),value:we,totals:Ne,size:"small"})}),(0,O.tZ)(u.ZP,{item:!0,children:(0,O.tZ)(N.Z,{sx:{height:"100%"},onChange:e=>t.displayCharacter.set({element:e}),value:xe,totals:Xe,size:"small"})}),(0,O.tZ)(u.ZP,{item:!0,flexGrow:1}),(0,O.tZ)(u.ZP,{item:!0,children:(0,O.tZ)(p.Z,{autoFocus:!0,value:Q,onChange:e=>ee(e.target.value),label:e("characterName"),size:"small",sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),(0,O.BX)(Z.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:[(0,O.tZ)(m.Z,{count:Pe,page:Se+1,onChange:ae}),(0,O.tZ)(J,{numShowing:ke.length,total:$e,t:e}),(0,O.tZ)(T.Z,{sortKeys:U,value:Ce,onChange:e=>t.displayCharacter.set({sortType:e}),ascending:be,onChangeAsc:e=>t.displayCharacter.set({ascending:e})})]})]})}),(0,O.tZ)(g.Z,{fullWidth:!0,onClick:()=>ie(!0),color:"info",startIcon:(0,O.tZ)(r.Z,{}),children:e(_||(_=H`addNew`))}),(0,O.tZ)(C.Suspense,{fallback:(0,O.tZ)(f.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:5e3}}),children:(0,O.tZ)(u.ZP,{container:!0,spacing:1,columns:q,children:ke.map((t=>(0,O.tZ)(u.ZP,{item:!0,xs:1,children:(0,O.tZ)($.Z,{characterKey:t,onClick:()=>pe(`${t}`),footer:(0,O.BX)(O.HY,{children:[(0,O.tZ)(y.Z,{}),(0,O.BX)(Z.Z,{sx:{py:1,px:2,display:"flex",gap:1,justifyContent:"space-between"},children:[(0,O.tZ)(P.Z,{placement:"top",title:(0,O.tZ)(w.Z,{children:e("tabs.talent")}),children:(0,O.tZ)(x.Z,{onClick:()=>pe(`${t}/talent`),children:(0,O.tZ)(c.Z,{})})}),(0,O.tZ)(P.Z,{placement:"top",title:(0,O.tZ)(w.Z,{children:e("tabs.teambuffs")}),children:(0,O.tZ)(x.Z,{onClick:()=>pe(`${t}/teambuffs`),children:(0,O.tZ)(i.Z,{})})}),(0,O.tZ)(P.Z,{placement:"top",title:(0,O.tZ)(w.Z,{children:e("tabs.optimize")}),children:(0,O.tZ)(x.Z,{onClick:()=>pe(`${t}/optimize`),children:(0,O.tZ)(s.Z,{})})}),(0,O.tZ)(P.Z,{placement:"top",title:(0,O.tZ)(w.Z,{children:e("tabs.theorycraft")}),children:(0,O.tZ)(x.Z,{onClick:()=>pe(`${t}/theorycraft`),children:(0,O.tZ)(o.Z,{})})}),(0,O.tZ)(y.Z,{orientation:"vertical"}),(0,O.tZ)(P.Z,{placement:"top",title:(0,O.tZ)(w.Z,{children:e("delete")}),children:(0,O.tZ)(x.Z,{color:"error",onClick:()=>de(t),children:(0,O.tZ)(h.Z,{})})})]})]})})},t)))})}),Pe>1&&(0,O.tZ)(S.Z,{children:(0,O.BX)(d.Z,{sx:{display:"flex",gap:1},children:[(0,O.tZ)(g.Z,{onClick:()=>ie(!0),color:"info",sx:{minWidth:0},children:(0,O.tZ)(w.Z,{children:(0,O.tZ)(l.G,{icon:a.r8p,className:"fa-fw"})})}),(0,O.BX)(u.ZP,{container:!0,alignItems:"flex-end",sx:{flexGrow:1},children:[(0,O.tZ)(u.ZP,{item:!0,flexGrow:1,children:(0,O.tZ)(m.Z,{count:Pe,page:Se+1,onChange:ae})}),(0,O.tZ)(u.ZP,{item:!0,children:(0,O.tZ)(J,{numShowing:ke.length,total:$e,t:e})})]})]})})]})}function J({numShowing:e,total:t,t:n}){return(0,O.tZ)(w.Z,{color:"text.secondary",children:(0,O.BX)(v.cC,{t:n,i18nKey:"showingNum",count:e,value:t,children:["Showing ",(0,O.tZ)("b",{children:{count:e}})," out of ",{value:t}," Characters"]})})}},10618:(e,t,n)=>{n.d(t,{X:()=>l});var a=n(41015);function l(e){return(t,n)=>{const l=t.length;return l===e.length?[n]:1===l&&t[0]===n?[...e]:[...new Set((0,a.nh)(t,n))]}}},40775:(e,t,n)=>{n.d(t,{W:()=>l});var a=n(41015);function l(e,t){const n=function(e){return Object.fromEntries(e.map((e=>[e,{total:0,current:0}])))}(e);return t(n),l=n,(0,a.xh)(l,(({total:e,current:t})=>t===e?`${e}`:`${t}/${e}`));var l}}}]);