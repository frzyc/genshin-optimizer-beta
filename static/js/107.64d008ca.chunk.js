"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[107],{46107:function(e,t,n){n.r(t),n.d(t,{default:function(){return ze}});var a=n(39504),r=n(20890),s=n(94721),i=n(10757),o=n(22020),c=n(76899),l=n(3992),u=n(29439),d=n(30168),h=n(53174),p=n(74223),x=n(80184),f=(0,p.Z)((0,x.jsx)("path",{d:"M9 3 5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3z"}),"ImportExport"),g=(0,p.Z)((0,x.jsx)("path",{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"}),"Upload"),j=n(72456),Z=(0,p.Z)((0,x.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),v=n(61889),m=n(24518),b=n(81918),y=n(52791),w=n(72791),C=n(71310),I=n(10600),k=n(82095),S=n(9321),D=n(34369),M=n(23741),O=n(1413),K="Genshin Optimizer";var z=n(3608);function P(e){var t=new Map,n=e.entries.filter((function(e){return(0,u.Z)(e,1)[0].startsWith("artifact_")})).map((function(e,n){var a=(0,u.Z)(e,2),r=a[0],s=a[1];return t.set(r,n),JSON.parse(s)}));return{format:"GOOD",dbVersion:z.U,source:K,version:1,characters:e.entries.filter((function(e){return(0,u.Z)(e,1)[0].startsWith("char_")})).map((function(e){var t=(0,u.Z)(e,2),n=(t[0],t[1]);return JSON.parse(n)})),artifacts:n,weapons:e.entries.filter((function(e){return(0,u.Z)(e,1)[0].startsWith("weapon_")})).map((function(e){var t=(0,u.Z)(e,2),n=(t[0],t[1]);return JSON.parse(n)})),states:e.entries.filter((function(e){return(0,u.Z)(e,1)[0].startsWith("state_")})).map((function(e){var t=(0,u.Z)(e,2),n=t[0],a=t[1];return(0,O.Z)((0,O.Z)({},JSON.parse(a)),{},{key:n.split("state_")[1]})})),buildSettings:e.entries.filter((function(e){return(0,u.Z)(e,1)[0].startsWith("buildSetting_")})).map((function(e){var n=(0,u.Z)(e,2),a=n[0],r=n[1],s=(0,O.Z)((0,O.Z)({},JSON.parse(r)),{},{key:a.split("buildSetting_")[1]});return s.builds=s.builds.map((function(e){return e.map((function(e){return t.has(e)?"artifact_".concat(t.get(e)):""})).filter((function(e){return e}))})),s}))}}var W=n(24711),G=n(17278),E=n(60393),_=n(74165),B=n(15861),H=n(54483),T=(0,p.Z)([(0,x.jsx)("ellipse",{cx:"12",cy:"12",rx:"3",ry:"5.74"},"0"),(0,x.jsx)("path",{d:"M7.5 12c0-.97.23-4.16 3.03-6.5C9.75 5.19 8.9 5 8 5c-3.86 0-7 3.14-7 7s3.14 7 7 7c.9 0 1.75-.19 2.53-.5-2.8-2.34-3.03-5.53-3.03-6.5zM16 5c-.9 0-1.75.19-2.53.5.61.51 1.1 1.07 1.49 1.63.33-.08.68-.13 1.04-.13 2.76 0 5 2.24 5 5s-2.24 5-5 5c-.36 0-.71-.05-1.04-.13-.39.56-.88 1.12-1.49 1.63.78.31 1.63.5 2.53.5 3.86 0 7-3.14 7-7s-3.14-7-7-7z"},"1")],"JoinLeft"),F=(0,p.Z)([(0,x.jsx)("ellipse",{cx:"12",cy:"12",rx:"3",ry:"5.74"},"0"),(0,x.jsx)("path",{d:"M7.5 12c0-.97.23-4.16 3.03-6.5C9.75 5.19 8.9 5 8 5c-3.86 0-7 3.14-7 7s3.14 7 7 7c.9 0 1.75-.19 2.53-.5-2.8-2.34-3.03-5.53-3.03-6.5zM16 5c-.9 0-1.75.19-2.53.5 2.8 2.34 3.03 5.53 3.03 6.5 0 .97-.23 4.16-3.03 6.5.78.31 1.63.5 2.53.5 3.86 0 7-3.14 7-7s-3.14-7-7-7z"},"1")],"JoinFull"),N=(0,p.Z)((0,x.jsx)("path",{d:"M18 4v5H6V4h12m0-2H6c-1.1 0-2 .9-2 2v5c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 13v5H6v-5h12m0-2H6c-1.1 0-2 .9-2 2v5c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2z"}),"Splitscreen"),V=(0,p.Z)((0,x.jsx)("path",{d:"M17 20.41 18.41 19 15 15.59 13.59 17 17 20.41zM7.5 8H11v5.59L5.59 19 7 20.41l6-6V8h3.5L12 3.5 7.5 8z"}),"MergeType"),A=n(66934),J=n(68870),L=n(40165),R=n(45748);function $(e){if(1===e.version)return function(e){var t,n=null!==(t=e.source)&&void 0!==t?t:"Unknown",a=function(e){return{type:"GOOD",source:e,artifacts:{import:[],invalid:[],new:[],updated:[],unchanged:[],removed:[],dbTotal:0,notInImport:0},weapons:{import:[],invalid:[],new:[],updated:[],unchanged:[],removed:[],dbTotal:0,notInImport:0},characters:{import:[],invalid:[],new:[],updated:[],unchanged:[],removed:[],dbTotal:0,notInImport:0}}}(n);e.artifacts&&e.artifacts.forEach((function(e,t){(0,R.R$)(e)?a.artifacts.import.push(e):a.artifacts.invalid.push(e)}));e.weapons&&e.weapons.forEach((function(e,t){(0,R.S0)(e)?a.weapons.import.push(e):a.weapons.invalid.push(e)}));e.characters&&e.characters.forEach((function(e){(0,R.J0)(e)?a.characters.import.push(e):a.characters.invalid.push(e)}));if(n===K){a.extra={buildSettings:[],states:[]};var r=e,s=r.states,i=r.buildSettings;s&&s.forEach((function(e){return a.extra.buildSettings.push((0,O.Z)((0,O.Z)({},e),{},{builds:[],buildDate:0}))})),i&&i.forEach((function(e){return a.extra.buildSettings.push((0,O.Z)((0,O.Z)({},e),{},{builds:[],buildDate:0}))}))}return a}(e)}var U,q,Y,Q,X=n(93433),ee=n(45987),te=n(566),ne=["key","level","constellation","ascension","talent"],ae=["key"],re=["key"];function se(e,t,n,a){var r,s=e.source,i=e.artifacts,o=e.weapons,c=e.characters,l=e.extra;if(c.import.length){var u=new Set(t.chars.keys);c.import.forEach((function(e){var n=t.chars.get(e.key);if(n)if(u.delete(n.key),c.updated.push(e),s===K)t.chars.set(e.key,e);else{var a=n.key,r=(n.level,n.constellation,n.ascension,n.talent,(0,ee.Z)(n,ne));t.chars.set(a,(0,O.Z)((0,O.Z)({},e),r))}else c.new.push(e),t.chars.set(e.key,e)}));var d=Array.from(u);n||a?c.notInImport=d.length:c.removed=d.map((function(e){var n=t.chars.get(e);return t.chars.remove(e),n})),c.unchanged=[]}else c.notInImport=t.chars.values.length;var h=function(e,n){if(!t.chars.get(n)){var a=(0,te.N)(n);t.chars.set(n,a),c.new.push(a)}};if(i.import.length){var p=new Set(t.arts.values.map((function(e){return e.id}))),x=i.import.some((function(e){return e.location}));i.import.forEach((function(e){var n=a?{duplicated:[],upgraded:[]}:t.arts.findDups(e),r=n.duplicated,s=n.upgraded;if(r=r.filter((function(e){return p.has(e.id)})),s=s.filter((function(e){return p.has(e.id)})),r[0]||s[0]){var o=r[0]||s[0];p.delete(o.id),x&&e.location&&h(o.id,e.location),e.location&&t.arts.set(o.id,{location:e.location}),r[0]?i.unchanged.push(e):i.updated.push(e)}else{var c=t.arts.new((0,O.Z)((0,O.Z)({},e),{},{location:""}));e.location&&h(0,e.location),e.location&&t.arts.set(c,{location:e.location}),i.new.push(e)}}));var f=Array.from(p);n||a?i.notInImport=f.length:i.removed=f.map((function(e){var n=t.arts.get(e);return t.arts.remove(e),n}))}else i.notInImport=t.arts.values.length;if(o.import.length){var g=new Set(t.weapons.values.map((function(e){return e.id}))),j=o.import.some((function(e){return e.location}));o.import.forEach((function(e){var n=a?{duplicated:[],upgraded:[]}:t.weapons.findDup(e),r=n.duplicated,s=n.upgraded;if(r=r.filter((function(e){return g.has(e.id)})),s=s.filter((function(e){return g.has(e.id)})),r[0]||s[0]){var i=r[0]||s[0];g.delete(i.id),j&&e.location&&h(i.id,e.location),e.location&&t.weapons.set(i.id,{location:e.location}),r[0]?o.unchanged.push(e):o.updated.push(e)}else{var c=t.weapons.new((0,O.Z)((0,O.Z)({},e),{},{location:""}));e.location&&h(0,e.location),e.location&&t.weapons.set(c,{location:e.location}),o.new.push(e)}}));var Z=Array.from(g);n||a?o.notInImport=Z.length:o.removed=Z.map((function(e){var n=t.weapons.get(e);return t.weapons.remove(e),n}))}else o.notInImport=t.weapons.values.length;if((r=o.new).push.apply(r,(0,X.Z)(t.weapons.ensureEquipment())),i.dbTotal=t.arts.values.length,o.dbTotal=t.weapons.values.length,c.dbTotal=t.chars.values.length,l){var v=l.states,m=l.buildSettings;v.forEach((function(e){var n=e,a=n.key,r=(0,ee.Z)(n,ae);a&&t.states.set(a,r)})),m.forEach((function(e){var n=e,a=n.key,r=(0,ee.Z)(n,re);a&&t.states.set(a,(0,O.Z)((0,O.Z)({},r),{},{builds:[],buildDate:0}))}))}return t}var ie,oe,ce,le,ue,de,he,pe=(0,A.ZP)("input")({display:"none"});function xe(e){var t,n=e.onReplace,s=(0,w.useContext)(D.t).database,i=(0,o.$)("settings").t,p=(0,w.useState)(""),f=(0,u.Z)(p,2),j=f[0],Z=f[1],b=(0,w.useState)(""),y=(0,u.Z)(b,2),I=y[0],k=y[1],S=(0,w.useState)(""),O=(0,u.Z)(S,2),K=O[0],z=O[1],P=(0,w.useState)(!1),W=(0,u.Z)(P,2),G=W[0],E=W[1],A=(0,w.useState)(!1),R=(0,u.Z)(A,2),X=R[0],ee=R[1],te=null!==(t=(0,w.useMemo)((function(){if(j){var e;try{if("object"!==typeof(e=JSON.parse(j)))return void z("uploadCard.error.jsonParse")}catch(a){return void z("uploadCard.error.jsonParse")}if("GOOD"===e.format){var t=$(e);if(!t)return void z("uploadCard.error.goInvalid");var n=new M.NI;return n.copyFrom(s.storage),{importResult:t,importedDatabase:se(t,new D.M(n),G,X)}}z("uploadCard.error.unknown")}}),[j,s,G,X]))&&void 0!==t?t:{},ne=te.importResult,ae=te.importedDatabase,re=function(){var e=(0,B.Z)((0,_.Z)().mark((function e(t){var n,a;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.files[0],t.target.value=null,n&&k(n.name),(a=new FileReader).onload=function(){return Z(a.result)},a.readAsText(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,x.jsxs)(C.Z,{children:[(0,x.jsx)(a.Z,{sx:{py:1},children:(0,x.jsx)(c.c,{t:i,i18nKey:"settings:uploadCard.title"})}),(0,x.jsxs)(a.Z,{children:[(0,x.jsxs)(v.ZP,{container:!0,spacing:2,sx:{mb:1},children:[(0,x.jsx)(v.ZP,{item:!0,children:(0,x.jsxs)("label",{htmlFor:"icon-button-file",children:[(0,x.jsx)(pe,{accept:".json",id:"icon-button-file",type:"file",onChange:re}),(0,x.jsx)(m.Z,{component:"span",startIcon:(0,x.jsx)(g,{}),children:"Upload"})]})}),(0,x.jsx)(v.ZP,{item:!0,flexGrow:1,children:(0,x.jsx)(l.Z,{sx:{px:2,py:1},children:(0,x.jsx)(r.Z,{children:I?(0,x.jsxs)("span",{children:[(0,x.jsx)(H.G,{icon:h.w49})," ",I]}):(0,x.jsxs)("span",{children:[(0,x.jsx)(H.G,{icon:h.acZ})," ",(0,x.jsx)(c.c,{t:i,i18nKey:"settings:uploadCard.hint"})]})})})})]}),(0,x.jsxs)(J.Z,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[(0,x.jsx)(L.Z,{title:(0,x.jsx)(J.Z,{children:(0,x.jsxs)(c.c,{t:i,i18nKey:"settings:uploadCard.tooltip.partial",children:[(0,x.jsx)(r.Z,{variant:"h6",children:"Full Import"}),(0,x.jsx)(r.Z,{gutterBottom:!0,children:"Assume the import to be the full inventory. Artifacts/weapons in GO that doesnt exist in the import are deleted."}),(0,x.jsx)(r.Z,{variant:"h6",children:"Partial Import"}),(0,x.jsx)(r.Z,{children:"Assume the import is a partial inventory. Artifacts/weapons are updated/deduplicated(depending on setting), but not deleted."})]})}),placement:"top",arrow:!0,children:(0,x.jsx)(J.Z,{sx:{flexGrow:1,flexBasis:"10em"},children:(0,x.jsx)(m.Z,{fullWidth:!0,disabled:!j,onClick:function(){return E(!G)},startIcon:G?(0,x.jsx)(T,{}):(0,x.jsx)(F,{}),children:i(G?U||(U=(0,d.Z)(["uploadCard.buttons.partialImport"])):q||(q=(0,d.Z)(["uploadCard.buttons.fullImport"])))})})}),(0,x.jsx)(L.Z,{title:(0,x.jsx)(J.Z,{children:(0,x.jsxs)(c.c,{t:i,i18nKey:"settings:uploadCard.tooltip.disjoint",children:[(0,x.jsx)(r.Z,{variant:"h6",children:"Merge Import"}),(0,x.jsx)(r.Z,{gutterBottom:!0,children:"Find upgrade/duplicates in the GO inventory and merge the import into GO."}),(0,x.jsx)(r.Z,{variant:"h6",children:"Disjoint Import"}),(0,x.jsx)(r.Z,{children:"Assume the import does not have any upgrades/duplicates, the import is merged into GO without upgrade/duplicate detection."})]})}),placement:"top",arrow:!0,children:(0,x.jsx)(J.Z,{sx:{flexGrow:1,flexBasis:"10em"},children:(0,x.jsx)(m.Z,{fullWidth:!0,disabled:!j,onClick:function(){return ee(!X)},startIcon:X?(0,x.jsx)(N,{}):(0,x.jsx)(V,{}),children:i(X?Y||(Y=(0,d.Z)(["uploadCard.buttons.disjointImport"])):Q||(Q=(0,d.Z)(["uploadCard.buttons.mergeImport"])))})})})]}),(0,x.jsx)(r.Z,{gutterBottom:!0,variant:"caption",children:(0,x.jsx)(c.c,{t:i,i18nKey:"settings:uploadCard.hintPaste"})}),(0,x.jsx)(J.Z,{component:"textarea",sx:{width:"100%",fontFamily:"monospace",minHeight:"10em",mb:2,resize:"vertical"},value:j,onChange:function(e){return Z(e.target.value)}}),ne?(0,x.jsx)(fe,{importResult:ne}):i(K)]}),(0,x.jsx)(je,{database:ae,reset:function(){Z(""),k(""),n()}})]})}function fe(e){var t=e.importResult,n=t.source,i=t.artifacts,u=t.characters,d=t.weapons,h=(0,o.$)("settings").t;return(0,x.jsxs)(l.Z,{children:[(0,x.jsx)(a.Z,{sx:{py:1},children:(0,x.jsxs)(r.Z,{children:[(0,x.jsx)(c.c,{t:h,i18nKey:"uploadCard.dbSource"}),(0,x.jsxs)("strong",{children:[" ",n]})]})}),(0,x.jsx)(s.Z,{}),(0,x.jsx)(a.Z,{children:(0,x.jsxs)(v.ZP,{container:!0,spacing:2,children:[(0,x.jsx)(v.ZP,{item:!0,flexGrow:1,children:(0,x.jsx)(ge,{result:i,type:"arts"})}),(0,x.jsx)(v.ZP,{item:!0,flexGrow:1,children:(0,x.jsx)(ge,{result:d,type:"weapons"})}),(0,x.jsx)(v.ZP,{item:!0,flexGrow:1,children:(0,x.jsx)(ge,{result:u,type:"chars"})})]})})]})}function ge(e){var t,n=e.result,i=e.type,l=(0,o.$)("settings").t,u=n.import.length;return(0,x.jsxs)(C.Z,{children:[(0,x.jsx)(a.Z,{sx:{py:1},children:(0,x.jsxs)(r.Z,{children:[(0,x.jsx)(c.c,{t:l,i18nKey:"count.".concat(i)})," ",u]})}),(0,x.jsx)(s.Z,{}),(0,x.jsxs)(a.Z,{children:[(0,x.jsxs)(r.Z,{children:[(0,x.jsx)(c.c,{t:l,i18nKey:"count.new"})," ",(0,x.jsx)("strong",{children:n.new.length})," / ",u]}),(0,x.jsxs)(r.Z,{children:[(0,x.jsx)(c.c,{t:l,i18nKey:"count.updated"})," ",(0,x.jsx)("strong",{children:n.updated.length})," / ",u]}),(0,x.jsxs)(r.Z,{children:[(0,x.jsx)(c.c,{t:l,i18nKey:"count.unchanged"})," ",(0,x.jsx)("strong",{children:n.unchanged.length})," / ",u]}),!!n.removed.length&&(0,x.jsxs)(r.Z,{color:"warning.main",children:[(0,x.jsx)(c.c,{t:l,i18nKey:"count.removed"})," ",(0,x.jsx)("strong",{children:n.removed.length})]}),!!n.notInImport&&(0,x.jsxs)(r.Z,{children:[(0,x.jsx)(c.c,{t:l,i18nKey:"count.notInImport"})," ",(0,x.jsx)("strong",{children:n.notInImport})]}),(0,x.jsxs)(r.Z,{children:[(0,x.jsx)(c.c,{t:l,i18nKey:"count.dbTotal"})," ",(0,x.jsx)("strong",{children:n.dbTotal})]}),!(null===(t=n.invalid)||void 0===t||!t.length)&&(0,x.jsxs)("div",{children:[(0,x.jsxs)(r.Z,{color:"error.main",children:[(0,x.jsx)(c.c,{t:l,i18nKey:"count.invalid"})," ",(0,x.jsx)("strong",{children:n.invalid.length})," / ",u]}),(0,x.jsx)(J.Z,{component:"textarea",sx:{width:"100%",fontFamily:"monospace",minHeight:"10em",resize:"vertical"},value:JSON.stringify(n.invalid,void 0,2),disabled:!0})]})]})]})}function je(e){var t=e.database,n=e.reset,r=(0,w.useContext)(D.t).setDatabase,i=(0,o.$)("settings").t,l=(0,w.useCallback)((function(){if(t){var e=new M.tE(localStorage);e.copyFrom(t.storage),t.storage=e,r(t),n()}}),[t,n,r]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.Z,{}),(0,x.jsx)(a.Z,{sx:{py:1},children:(0,x.jsx)(m.Z,{color:t?"success":"error",disabled:!t,onClick:l,startIcon:(0,x.jsx)(H.G,{icon:h.Y9i}),children:(0,x.jsx)(c.c,{t:i,i18nKey:"settings:uploadCard.replaceDatabase"})})})]})}function Ze(){var e=(0,w.useContext)(D.t),t=parseInt(e.database.storage.getString("dbIndex")||"1"),n=(0,o.$)(["settings"]).t;return(0,x.jsxs)(C.Z,{children:[(0,x.jsx)(a.Z,{sx:{py:1},children:(0,x.jsx)(r.Z,{variant:"subtitle1",children:n(ie||(ie=(0,d.Z)(["DatabaseCard.title"])))})}),(0,x.jsx)(s.Z,{}),(0,x.jsx)(a.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:(0,x.jsx)(v.ZP,{container:!0,spacing:2,columns:{xs:1,md:2},children:(0,E.w6)(1,4).map((function(n){return(0,x.jsx)(v.ZP,{item:!0,xs:1,children:n===t?(0,x.jsx)(me,{index:n}):(0,x.jsx)(ve,{index:n,children:(0,x.jsx)(me,{index:n,databaseContextObj:e})})},n)}))})})]})}function ve(e){var t=e.index,n=e.children,a=(0,w.useState)((function(){var e,n="extraDatabase_".concat(t),a=new M.Bc(n),r=JSON.parse(null!==(e=localStorage.getItem(n))&&void 0!==e?e:'{ "dbIndex": "'.concat(t,'" }'));a.setStorage(r),a.removeForKeys((function(e){return e.startsWith("extraDatabase_")}));var s=new D.M(a);return a.saveStorage(),s})),r=(0,u.Z)(a,2),s=r[0],i=r[1];return(0,x.jsx)(D.t.Provider,{value:{database:s,setDatabase:i},children:n})}function me(e){var t=e.index,n=e.databaseContextObj,i=(0,w.useContext)(D.t),p=i.database,C=i.setDatabase,O=(0,G.Z)("dbMeta",(0,G.t)(t)),K=(0,u.Z)(O,2),z=K[0],E=z.name,_=z.lastEdit,B=K[1],H=!n,T=(0,W.Z)(),F=(0,u.Z)(T,3),N=F[0],V=F[1],A=F[2],J=(0,o.$)(["settings"]).t,L=p.chars.keys.length,R=p.arts.values.length,$=p.weapons.values.length,U=Boolean(L||R||$),q=(0,w.useCallback)((function(){return navigator.clipboard.writeText(JSON.stringify(P(p.storage))).then((function(){return alert("Copied database to clipboard.")})).catch(console.error)}),[p]),Y=(0,w.useCallback)((function(){(A(),H)||p.storage.saveStorage()}),[A,H,p.storage]),Q=(0,w.useCallback)((function(){if(window.confirm('Are you sure you want to delete "'.concat(E,'"?')))if(H)p.clear(),C(new D.M(p.storage));else{var e=p.storage.databaseName,t=new M.Bc(e);t.setStorage({}),C(new D.M(t)),localStorage.removeItem(e)}}),[p,H,E,C]),X=(0,w.useCallback)((function(){var e=(new Date).toISOString().split(".")[0].replace("T","_").replaceAll(":","-"),t=JSON.stringify(P(p.storage)),n="".concat(E.trim().replaceAll(" ","_"),"_").concat(e,".json"),a=document.createElement("a");a.download=n,a.href="data:".concat("application/json;charset=utf-8",",").concat(encodeURIComponent(t)),a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)}),[p,E]),ee=(0,w.useCallback)((function(){if(n){var e=parseInt(n.database.storage.getString("dbIndex")||"1"),a=new M.Bc("extraDatabase_".concat(e),n.database.storage);a.removeForKeys((function(e){return e.startsWith("extraDatabase_")})),a.saveStorage();var r=p.storage.databaseName;localStorage.removeItem(r),n.database.clear(),n.database.storage.copyFrom(p.storage),n.database.storage.set("dbIndex",t),n.setDatabase(new D.M(n.database.storage))}}),[n,p,t]),te=(0,w.useState)(E),ne=(0,u.Z)(te,2),ae=ne[0],re=ne[1];(0,w.useEffect)((function(){return re(E)}),[E]);var se=(0,w.useCallback)((function(){B({name:ae}),H||p.storage.saveStorage()}),[B,ae,p,H]),ie=(0,w.useCallback)((function(e){return"Enter"===e.key&&se()}),[se]);return(0,x.jsxs)(l.Z,{sx:{height:"100%",boxShadow:H?"0px 0px 0px 2px green inset":void 0},children:[(0,x.jsxs)(a.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[(0,x.jsx)(I.el,{value:ae,sx:{borderRadius:1,px:1,flexGrow:1},onChange:function(e){return re(e.target.value)},onBlur:se,onKeyDown:ie}),!H&&(0,x.jsx)(m.Z,{startIcon:(0,x.jsx)(f,{}),onClick:ee,color:"warning",children:J(oe||(oe=(0,d.Z)(["DatabaseCard.button.swap"])))}),(0,x.jsx)(b.Z,{color:H?"success":"secondary",label:H?J(ce||(ce=(0,d.Z)(["DatabaseCard.currentDB"]))):"".concat(J(le||(le=(0,d.Z)(["DatabaseCard.title"])))," ").concat(t)})]}),(0,x.jsx)(s.Z,{}),(0,x.jsx)(a.Z,{children:(0,x.jsxs)(y.Z,{display:"flex",gap:2,children:[(0,x.jsxs)(y.Z,{flexGrow:1,children:[(0,x.jsxs)(r.Z,{noWrap:!0,children:[(0,x.jsx)(c.c,{t:J,i18nKey:"count.chars"})," ",(0,x.jsx)("strong",{children:L})]}),(0,x.jsxs)(r.Z,{noWrap:!0,children:[(0,x.jsx)(c.c,{t:J,i18nKey:"count.arts"})," ",(0,x.jsx)("strong",{children:R})]}),(0,x.jsxs)(r.Z,{noWrap:!0,children:[(0,x.jsx)(c.c,{t:J,i18nKey:"count.weapons"})," ",(0,x.jsx)("strong",{children:$})]}),!!_&&(0,x.jsx)(r.Z,{noWrap:!0,children:(0,x.jsx)("strong",{children:new Date(_).toLocaleString()})})]}),(0,x.jsx)(y.Z,{children:(0,x.jsxs)(v.ZP,{container:!0,spacing:1,columns:{xs:2},children:[(0,x.jsx)(v.ZP,{item:!0,xs:1,children:(0,x.jsx)(m.Z,{fullWidth:!0,disabled:!U,color:"info",onClick:q,startIcon:(0,x.jsx)(k.Z,{icon:h.Yjj}),children:(0,x.jsx)(c.c,{t:J,i18nKey:"DatabaseCard.button.copy"})})}),(0,x.jsxs)(v.ZP,{item:!0,xs:1,children:[(0,x.jsx)(S.Z,{open:N,onClose:A,children:(0,x.jsx)(xe,{onReplace:Y})}),(0,x.jsx)(m.Z,{fullWidth:!0,component:"span",color:"info",startIcon:(0,x.jsx)(g,{}),onClick:V,children:J(ue||(ue=(0,d.Z)(["DatabaseCard.button.upload"])))})]}),(0,x.jsx)(v.ZP,{item:!0,xs:1,children:(0,x.jsx)(m.Z,{fullWidth:!0,disabled:!U,onClick:X,startIcon:(0,x.jsx)(j.Z,{}),children:J(de||(de=(0,d.Z)(["DatabaseCard.button.download"])))})}),(0,x.jsx)(v.ZP,{item:!0,xs:1,children:(0,x.jsx)(m.Z,{fullWidth:!0,disabled:!U,color:"error",onClick:Q,startIcon:(0,x.jsx)(Z,{}),children:J(he||(he=(0,d.Z)(["DatabaseCard.button.delete"])))})})]})})]})})]})}var be=n(23786),ye=n(33890),we=n(25617),Ce=n(72828);function Ie(){var e=(0,o.$)().t;return(0,x.jsxs)(C.Z,{children:[(0,x.jsxs)(a.Z,{sx:{py:1},children:[e("settings:languageCard.selectLanguage")," ",(0,x.jsx)(we.Z,{color:"warning",children:e("ui:underConstruction")})]}),(0,x.jsx)(s.Z,{}),(0,x.jsx)(a.Z,{children:(0,x.jsx)(Se,{})})]})}var ke={chs:"\u4e2d\u6587 \u6b63\u4f53\u5b57",cht:"\u4e2d\u6587 \u7e41\u9ad4\u5b57",de:"Deutsch",en:"English",es:"espa\xf1ol",fr:"fran\xe7ais",id:"Bahasa Indonesia",ja:"\u65e5\u672c\u8a9e",ko:"\ud55c\uad6d\uc5b4",pt:"Portugu\xeas",ru:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a",th:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",vi:"Ti\u1ebfng Vi\u1ec7t"};function Se(){var e=(0,o.$)(["ui","settings"]),t=e.t,n=e.i18n,a=function(e){return function(){return n.changeLanguage(e)}},r=n.languages[0];return(0,x.jsx)(ye.Z,{fullWidth:!0,title:t("settings:languageCard.languageFormat",{language:t("languages:".concat(r))}),children:Ce.C.map((function(e){return(0,x.jsxs)(be.Z,{selected:r===e,disabled:r===e,onClick:a(e),children:[(0,x.jsx)(c.c,{i18nKey:"languages:".concat(e)}),e!==r?" (".concat(ke[e],")"):""]},e)}))})}var De=n(72247),Me=n(9912),Oe=n(12759);function Ke(){var e=(0,G.Z)("GlobalSettings",Oe.c),t=(0,u.Z)(e,2),n=t[0].tcMode,s=t[1];return(0,x.jsx)(C.Z,{children:(0,x.jsxs)(a.Z,{children:[(0,x.jsx)(r.Z,{gutterBottom:!0,color:"warning.main",children:"Enabling this toggle will show some features that might be too complex for the average user."}),(0,x.jsx)(m.Z,{fullWidth:!0,onClick:function(){return s({tcMode:!n})},color:n?"success":"primary",startIcon:n?(0,x.jsx)(De.Z,{}):(0,x.jsx)(Me.Z,{}),children:"Theorycrafting Mode"})]})})}function ze(){var e=(0,o.$)(["settings"]).t;return i.ZP.send({hitType:"pageview",page:"/setting"}),(0,x.jsxs)(l.Z,{sx:{my:1},children:[(0,x.jsx)(a.Z,{sx:{py:1},children:(0,x.jsx)(r.Z,{variant:"subtitle1",children:(0,x.jsx)(c.c,{t:e,i18nKey:"title"})})}),(0,x.jsx)(s.Z,{}),(0,x.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,x.jsx)(Ie,{}),(0,x.jsx)(Ze,{}),(0,x.jsx)(Ke,{})]})]})}},566:function(e,t,n){n.d(t,{N:function(){return p},Z:function(){return h}});var a=n(74165),r=n(15861),s=n(72791),i=n(16871),o=n(947),c=n(34369),l=n(24351),u=n(11400),d=n(60393);function h(){var e,t=(0,s.useContext)(c.t).database,n=(0,i.s0)(),l=(null!==(e=(0,i.bS)({path:"/characters/:charKey/:tab",end:!1}))&&void 0!==e?e:{params:{tab:""}}).params.tab,d=void 0===l?"":l,h=(0,s.useCallback)(function(){var e=(0,r.Z)((0,a.Z)().mark((function e(r){var s,i,c,l,h,x;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.chars.get(r),i=d,s){e.next=14;break}return c=p(r),t.chars.set(r,c),e.next=7,o.Z.get(r);case 7:if(l=e.sent){e.next=10;break}return e.abrupt("return");case 10:h=(0,u.Qu)(l.weaponTypeKey),x=t.weapons.new(h),t.weapons.set(x,{location:r}),i="";case 14:n("/characters/".concat(r,"/").concat(i));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,t,d]);return h}function p(e){return{key:e,level:1,ascension:0,hitMode:"avgHit",equippedArtifacts:(0,d.O)(l.eV,(function(){return""})),equippedWeapon:"",conditional:{},bonusStats:{},enemyOverride:{},talent:{auto:1,skill:1,burst:1},infusionAura:"",constellation:0,team:["","",""],teamConditional:{},compareData:!1,customMultiTarget:[]}}},12759:function(e,t,n){n.d(t,{B:function(){return i},c:function(){return s}});var a=n(93433),r=n(50765);function s(){return{tcMode:!1}}function i(){return{rvFilter:(0,a.Z)(r._),favorite:!1}}},72247:function(e,t,n){var a=n(74223),r=n(80184);t.Z=(0,a.Z)((0,r.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox")},9912:function(e,t,n){var a=n(74223),r=n(80184);t.Z=(0,a.Z)((0,r.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank")},72456:function(e,t,n){var a=n(74223),r=n(80184);t.Z=(0,a.Z)((0,r.jsx)("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download")}}]);
//# sourceMappingURL=107.64d008ca.chunk.js.map